\chapter{Symbolic Computer Algebra}

\section{Computations using computer algebra}

A \textit{computer algebra system} (or \textit{CAS}, for short) is software
that is able to perform algebraic procedures similar to what you would
normally do ``by hand.'' There are several popular CAS used in mathematics,
with the most common being Mathematica, Sage, and Maple. We will
be using Sage, as it is available as free open-source software, and it has been
largely developed by mathematicians, integrating many specialized packages
used by casual and professional mathematics researchers. Much of it
uses Python, so if you have any knowledge of coding in Python, you will find
Sage to be familiar; but fear not if you do not have any prior experience,
as the purpose of this lesson is to get the hang of the basics!

Sage can be installed on your computer or run from the CoCalc servers
if you create a (free) account. For now, we will use a lightweight version of Sage
that can be run on a webpage without any installation or other hassles.
 Go to \url{https://sagecell.sagemath.org/}.

You can enter basic Sage commands into the textbox on that page and
click ``Evaluate'' to get the output. We will begin by testing out some basic
arithmetic operations.

\clearpage
\begin{worksheet}{6}{Sage Cell Server}{sage.png}
\input{cas/lab6}
\end{worksheet}
\clearpage



\section{Sage on CoCalc -- the interface}

For more advanced calculations that require multiple
steps, it will be beneficial to signup for CoCalc. CoCalc is a cloud-based service\footnote{``In the cloud'' really just means ``on somebody else's computer.''  There are a ton of servers out there that can be rented on flexible terms, CoCalc just purchases computing power as needed\dots} that gives its users access to many software packages.  Originally it was Sage only, but now, in addition to Sage,  one can run Python notebooks, \LaTeX{} documents, get a full Linux terminal, run a so-called ``computational whiteboard,'' even manage a course on CoCalc.  The CoCalc interface allows for sharing projects and working on thing collaboratively with one's partners -- edits become visible to the other party in real time.

Because of its genesis as a web interface to a free, open-source project, CoCalc makes free accounts available.  One can also purchase ``upgrades'' that give certain perks (most notably, access to less highly-loaded servers for your computations).  The free accounts come equipped with an ``annoyatron'' banner that urges you to get a payed account.  Many Colleges/Universities will be able to provide you with upgrade tokens so you will have the more premium experience.


This lab will lead you through the process of obtaining a CoCalc account and getting started with the Sage notebook interface.

\clearpage
\begin{worksheet}{7}{Sage on CoCalc}{sage.png}
\input{cas/lab7}
\end{worksheet}
\clearpage

\section{Sage on CoCalc II -- Algebra}

The last lab mostly concentrated on getting you used to the interface. Of course, learning that interface would be pointless if Sage wasn't capable of doing something useful for us!

And it {\em definitely} can!

The next lab has us exploring Sage's abilities in Algebra.  Recall the operations with polynomials that you learned to do by hand in Algebra class:

\begin{itemize}
	\item Multiplying 2 polynomials (do you recall the FOIL mnemonic?)
	\item Factoring a polynomial (sort of the opposite of the previous thing)
	\item Evaluating a polynomial at a particular value of its variable.
	\item Solving -- what $x$ values give a particular output?
\end{itemize}

Not to say that that was wasted effort (if nothing else, your brains got stronger from the exercise!)
but, yeah, Sage can do all of that and more\dots

Before we jump into the actual lab, a quick word about ``equals.''

There's really just one version of the ``equality'' idea in Mathematics.  In Computing, there are two:
\begin{enumerate}
	\item One place an equals sign shows up is when we're assigning a value to a variable.
	\item The other place an equals sign shows up is when we're checking whether to variables actually contain the same content.
\end{enumerate}

In Sage (and Python) the ``assignment'' version uses a single ``$=$'' -- the ``equality testing'' sense use a double ``$==$.''  

If you were to execute 

\begin{codeblock}
\begin{verbatim}
x=1
x==0
\end{verbatim}
\end{codeblock}

\noindent in a Sage cell, the first line (being an assignment) will produce no output, and the second line will produce output informing us that {\em no} - one and zero are not the same.


\begin{worksheet}{8}{Sage on CoCalc II -- Algebra}{sage.png}
\input{cas/lab8}
\end{worksheet}
\clearpage

\begin{worksheet}{9}{Finding Solutions in Sage}{sage.png}
\input{cas/lab9}
\end{worksheet}
\clearpage



\section{Iterating functions and chaos}

We now consider what happens when applying the function $g(x)=-rx^2+rx$
to a number repeatedly.

We will start when $r=0.5$, so that $g(x)=-0.5x^2+0.5x$. We will start with
the value $x=2$. What is the value of $g(2)$? $g(g(2))$? $g(g(g(2))$?
If we continue to apply $g$ more and more times to the result, what eventually
happens to the output? Use Sage to make your calculations. You may want to
apply \textbf{n()} to your output to get a decimal value to more easily
see the pattern.

Now change $x$ to any number of your choice and repeat the experiment of
applying $g$ repeatedly. What is the eventual outcome?

(all initial values converge to $0$)

Now consider when $r=1.2$, i.e. $g(x)=-1.2x^2+1.2x$.
Start with an initial value of your choice and repeat
the experiment of applying $g$ repeatedly. What is the eventual outcome?

(all initial values converge to $\frac{r-1}{r}=0.1\bar{6}$)

To track the results of iteratively applying the function $g(x)$ to an initial
value of $x=a$, we can create a list of values.

\begin{verbatim}
var('x')
g(x)=-0.5*x^2+0.5*x

a=0.5

points = [a, g(a), g(g(a)), g(g(g(a))), g(g(g(g(a)))), g(g(g(g(g(a)))))]
\end{verbatim}

We can then plot this using the \textbf{list\_plots} function.

\begin{verbatim}
list_plot(points)
\end{verbatim}

If we want to change the value of $a$, we can easily do so, then re-run
the commands that come after it. In addition, if we want to see what
happens when we apply $g(x)$ more times, we can also add those
extra iterates to the list to get a better visualization of what happens
to the output as we apply $g(x)$ more and more times.

Play around with different values of $r$ between $2$ and $4$ and any
choice of the initial value $x$. What patterns do you notice?

Now let's fix a value of $r=3.5$, so we are looking at the function
$g(x)=-3.5x^2+3.5x$. Pick two different values of $x$ that are close to each other 
(within $0.1$ of each other) and plot repeated iterates of $g(x)$ on separate
graphs. What do you notice?
What happens as the two values of $x$ get closer and closer together?

We note that the values seem to be clustered around 4 different values,
and that the iterates seem to cycle through the values systematically. This is called
a \textit{periodic orbit}, and in particular, this is a periodic orbit of length 4 because
the values (approximately) repeat every 4 times that we apply $g$. To find
the periodic points, we can solve for when $x=g(g(g(g(x))))$. Find the points
in this periodic orbit by solving $x=g(g(g(g(x))))$ using Sage.

(Solutions are $x=0, \frac{3}{7}, \frac{5}{7}, \frac{6}{7}$)

